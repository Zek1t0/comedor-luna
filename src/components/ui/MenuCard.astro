---
import WhatsAppChip from "./WhatsAppChip.astro";

interface Props {
  name: string;
  description?: string;
  tags?: string | string[];
  featured?: boolean;

  // Chip WhatsApp
  chipLabel?: string; // default "Consultar"
}

const { name, description = "", tags = [], featured = false, chipLabel = "Consultar el precio" } = Astro.props;

const tagList = Array.isArray(tags)
  ? tags
  : String(tags || "")
      .split(",")
      .map((s) => s.trim())
      .filter(Boolean);
---

<article class={`rounded-2xl bg-white border border-line shadow-mdx p-6 ${featured ? "ring-1 ring-primary/30" : ""}`}>
  <div class="flex items-start justify-between gap-3">
    <h3 class="text-xl font-medium">{name}</h3>
    <WhatsAppChip dish={name} label={chipLabel} size="sm" />
  </div>

  {description && <p class="muted leading-relaxed mt-2">{description}</p>}

  {tagList.length > 0 && (
    <div class="flex flex-wrap gap-2 mt-3">
      {tagList.map((t) => (
        <span class="inline-flex items-center rounded-full border border-line bg-white text-xs px-2 py-1">{t}</span>
      ))}
    </div>
  )}

  <slot />
</article>
