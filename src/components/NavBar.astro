---
const rawPath = Astro.url.pathname.replace(/\/+$/, '');
const base = import.meta.env.BASE_URL.replace(/\/+$/, ''); // "/comedor-luna" o ""

const escapeRegExp = (s: string) =>
  s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');

const normalizedPath = (() => {
  const p = base ? rawPath.replace(new RegExp('^' + escapeRegExp(base)), '') : rawPath;
  return p === '' ? '/' : p;
})();

const link = (href: string) =>
  `opacity-85 hover:opacity-100 ${
    normalizedPath === href || normalizedPath.startsWith(href + '/')
      ? 'font-semibold text-primary opacity-100'
      : ''
  }`;
---
  

<nav class="sticky top-0 z-50 border-b border-black/10 bg-white/70 backdrop-blur">
  <div class="container-max flex items-center justify-between py-3">
    <a href={`${import.meta.env.BASE_URL}`} class="font-serif text-2xl">Comedor Luna</a>
    <div class="flex items-center gap-5">
    <a class={link('/menu')} href={`${import.meta.env.BASE_URL}menu/`}>Men√∫</a>
    <a class={link('/historia')} href={`${import.meta.env.BASE_URL}historia/`}>Nosotros</a>
    <a class={link('/souvenirs')} href={`${import.meta.env.BASE_URL}souvenirs/`}>Souvenirs</a>
    <a class="btn btn-primary" href={`${import.meta.env.BASE_URL}#contacto`}>Contacto</a>
    </div>
  </div>
</nav>
