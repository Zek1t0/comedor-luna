---
import BaseLayout from "../layouts/BaseLayout.astro";
import NavBar from "../components/NavBar.astro";
import Footer from "../components/Footer.astro";

// Tel√©fono para consultas por WhatsApp (ajust√° si cambia)
const WA = "5493644636144";

type Item = {
  name: string;
  price: string;
  desc: string;
  tags?: string[];
  image?: string; // opcional
  emoji?: string; // fallback si no hay imagen
};

type Category = {
  id: string;
  title: string;
  items: Item[];
};

const categories: Category[] = [
  {
    id: "mates-bombillas",
    title: "Mates & Bombillas",
    items: [
      {
        name: "Mate de Calabaza",
        price: "$ 10.500",
        desc: "Calabaza seleccionada, virola de aluminio. M√∫ltiples dise√±os: torpedo; camionero; imperial, cl√°sico, etc...",
        tags: ["Variedad", "Hecho a mano"],
        image: "/img/souvenirs/mate-calabaza.jpg",
        emoji: "üßâ",
      },
      {
        name: "Mate de Madera",
        price: "$ 9.800",
        desc: "Madera estacionada, con variedad dise√±os: torpedo; camionero; imperial, cl√°sico, etc...",
        tags: ["Variedad", "Hecho a mano"],
        image: "/img/souvenirs/mate-madera.jpg",
        emoji: "ü™µ",
      },
      {
        name: "Mate de PVC",
        price: "$ 9.800",
        desc: "Pl√°stico resistente y duradero. Interior curado.",
        tags: ["Econ√≥mico", "Ligero"],
        image: "/img/souvenirs/mate-plastico.jpg",
        emoji: "‚ôªÔ∏è",
      },
      {
        name: "Mates de Aluminio",
        price: "$ 9.800",
        desc: "Aluminio liviano y resistente, contienen grabados.",
        tags: ["Variedad", "Grabados"],
        image: "/img/souvenirs/mate-aluminio-equipo.jpg",
        emoji: "ü™ô",
      },
      {
        name: "Mates de Acero Inoxidable",
        price: "$ 9.800",
        desc: "Acero inoxidable 304. Duradero y f√°cil de limpiar.",
        tags: ["Inox", "Duradero"],
        image: "/img/souvenirs/mate-acero-inoxidable.jpg",
        emoji: "ü•á",
      },
      {
        name: "Bombillas",
        price: "$ 5.600",
        desc: "Dise√±os cl√°sicos y modernos con variedad de modelos disponibles: Bombillas de acero inoxidable, con filtro incorporado; Bombillas de Alpaca; etc...",
        tags: ["Inox", "Filtro", "Alpaca", "Variedad"],
        image: "/img/souvenirs/bombilla.jpg",
        emoji: "ü•Ñ",
      },
    ],
  },
  {
    id: "memoria",
    title: "Memorias",
    items: [
      {
        name: "Termo",
        price: "$ 28.900",
        desc: "Mantiene la temperatura por horas. Ideal para d√≠a de campo.",
        tags: ["Tapa cebadora", "Inox", "Duradero"],
        image: "/img/souvenirs/termos.jpg",
        emoji: "üßä",
      },
      {
        name: "Llaveros de Chapa",
        price: "$ 24.500",
        desc: "Hechos a mano con chapa de calidad.",
        tags: ["Viaje", "Ligero", "Popular"],
        image: "/img/souvenirs/llaveros.jpg",
        emoji: "üóùÔ∏è",
      },
      {
        name: "Llaveros con Cuero",
        price: "$ 24.500",
        desc: "Hechos a mano con cuero y herrajes de calidad.",
        tags: ["Viaje", "Cuero", "Resistente"],
        image: "/img/souvenirs/llaveros-con-cuero.jpg",
        emoji: "üóùÔ∏è",
      },
      {
        name: "Llaveros Chistosos",
        price: "$ 24.500",
        desc: "Llaveros con dise√±os divertidos y originales.",
        tags: ["Viaje", "Humor", "Popular"],
        image: "/img/souvenirs/llaveros-meme.jpg",
        emoji: "üóùÔ∏è",
      },
      {
        name: "Llaveros Metalicos",
        price: "$ 24.500",
        desc: "Hechos a mano con metales resistentes.",
        tags: ["Viaje", "Duradero", "√önico"],
        image: "/img/souvenirs/llavero-pescador.jpg",
        emoji: "üóùÔ∏è",
      },
      {
        name: "Soporte para celular",
        price: "$ 24.500",
        desc: "Hechos a mano con cuero y herrajes de calidad.",
        tags: ["Pr√°ctico", "Hecho en Chaco"],
        image: "/img/souvenirs/soporte.jpg",
        emoji: "üì±",
      },
    ],
  },
  {
    id: "marroquineria",
    title: "Marroquiner√≠a",
    items: [
      {
        name: "Carteras",
        price: "$ 41.000",
        desc: "Carteras con multiples dise√±os y tama√±os disponibles.",
        tags: ["Premium", "Hecho en Chaco"],
        image: "/img/souvenirs/carteras.jpg",
        emoji: "üëú",
      },
      {
        name: "Billeteras",
        price: "$ 18.900",
        desc: "Costuras reforzadas, con variedad de dise√±os. M√∫ltiples ranuras para tarjetas y billetes.",
        tags: ["Variedad", "Popular", "Unisex"],
        image: "/img/souvenirs/billeteras.jpg",
        emoji: "üíµ",
      },
      {
        name: "Ri√±oneras",
        price: "$ 18.900",
        desc: "Costuras reforzadas. M√∫ltiples ranuras para llevar lo que quieras",
        tags: ["Variedad", "Unisex"],
        image: "/img/souvenirs/ri√±oneras.jpg",
        emoji: "üéí",
      },
      {
        name: "Porta mates",
        price: "$ 18.900",
        desc: "Costuras reforzadas. M√∫ltiples ranuras para llevar el equipo de mate.",
        tags: ["Hecho a mano", "Popular", "Viaje"],
        image: "/img/souvenirs/porta-mates.jpg",
        emoji: "üßâ",
      },
      {
        name: "Cintos",
        price: "$ 18.900",
        desc: "Hecho a mano por artesanos del Chaco.",
        tags: ["Cuero", "Hecho en Chaco", "Duradero"],
        image: "/img/souvenirs/cintos.jpg",
        emoji: "üéóÔ∏è",
      },
    ],
  },
];

const waLink = (name: string) =>
  `https://wa.me/${WA}?text=${encodeURIComponent(
    `Hola, me gustar√≠a consultar por el souvenir: ${name}.`
  )}`;
---

<BaseLayout title="Souvenirs ‚Äî Comedor Luna">
  <NavBar />

  <!-- HERO con gradiente (sin imagen) -->
  <header class="relative overflow-hidden">
    <img
      src={"/img/fondo5.jpg"}
      alt=""
      class="absolute inset-0 h-full w-full object-cover blur-xs scale-110"
      loading="eager"
      decoding="async"
    />
    <div class="absolute inset-0 bg-black/55 md:bg-black/45"></div>


    <div class="relative mx-auto max-w-6xl px-6 py-20 text-center text-white">
      <h1 class="font-serif text-5xl md:text-6xl">Souvenirs</h1>
      <p class="mx-auto mt-4 max-w-2xl text-white/90 drop-shadow-[0_4px_14px_rgba(0,0,0,0.95)]">
        Objetos con identidad local para llevarte un pedacito de Comedor Luna ‚Äî y de nuestras tierras ‚Äî a casa.
      </p>

      <!-- tus chips ac√° tal cual -->
      <div class="mt-6 flex flex-wrap justify-center gap-3">
        <a href="#mates-bombillas" class="chip" data-animate="up" style="--reveal-delay: 200ms">Mates</a>
        <a href="#memoria"         class="chip" data-animate="up" style="--reveal-delay: 280ms">Memorias</a>
        <a href="#marroquineria"  class="chip" data-animate="up" style="--reveal-delay: 360ms">Marroquiner√≠a</a>
      </div>

    <div class="pointer-events-none absolute left-0 right-0 bottom-0 h-[110px]
                bg-gradient-to-b from-transparent to-[var(--bg)]"></div>
        <!-- ... -->
      </div>
    </div>
  </header>


  <main class="container-max">
    <!-- Nota / Info -->
    <section class="py-8">
      <div data-animate="up" class="rounded-2xl p-4 md:p-5 bg-[#f8efe6] border border-line shadow-mdx">
        <p class="text-sm md:text-[0.98rem]">
          <strong>Hecho a mano.</strong> Muchos de nuestros souvenirs son realizados por artesanos locales.
          Los precios pueden variar levemente seg√∫n disponibilidad y producci√≥n.
          Para consultas especiales o corporativas, <a href={`https://wa.me/${WA}`} class="underline text-[var(--primary)] hover:opacity-90">escribinos por WhatsApp</a>.
        </p>
      </div>
    </section>

    <!-- Listado por categor√≠as -->
    {categories.map((cat) => (
      <section id={cat.id} class="py-8 md:py-12">
        <div class="flex items-baseline justify-between mb-4 md:mb-6 gap-4">
          <h2 class="font-serif text-2xl md:text-3xl">{cat.title}</h2>
          <a href="#top" class="text-sm opacity-70 hover:opacity-100">Volver arriba</a>
        </div>

        <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
          {cat.items.map((it) => (
            <article class="souvenir-card">
              <div class="media">
                {it.image ? (
                  <>
                    <img
                      src={it.image}
                      alt={it.name}
                      class="absolute inset-0 w-full h-full object-cover"
                      loading="lazy"
                      decoding="async"
                      onerror="this.style.display='none'; this.parentElement.querySelector('.emoji-fallback')?.style.setProperty('display','flex');"
                    />
                    <div class="emoji-fallback" style="display:none">
                      {it.emoji ?? "üéÅ"}
                    </div>
                  </>
                ) : (
                  <div class="emoji-fallback" style="display:flex">
                    {it.emoji ?? "üéÅ"}
                  </div>
                )}
                {it.tags && it.tags.length > 0 && (
                  <div class="absolute left-2 top-2 flex flex-wrap gap-2">
                    {it.tags.map((t) => (
                      <span class="badge">{t}</span>
                    ))}
                  </div>
                )}
              </div>

              <div class="p-4">
                <div class="flex items-start justify-between gap-3">
                  <h3 class="font-semibold">{it.name}</h3>
                  {/* <span class="price">{it.price}</span> */}
                </div>
                <p class="muted mt-2">{it.desc}</p>

                <div class="mt-4 flex gap-2">
                  <a href={waLink(it.name)} target="_blank" rel="noopener" class="btn btn-primary">Consultar</a>
                  <a href={`https://wa.me/${WA}?text=${encodeURIComponent("Quiero hacer un pedido especial.")}`} target="_blank" rel="noopener" class="btn btn-ghost">Pedido especial</a>
                </div>
              </div>
            </article>
          ))}
        </div>
      </section>
    ))}
  </main>
  <!-- Footer -->
  <Footer />

  <!-- Estilos espec√≠ficos de la p√°gina -->
  <style>
    /* HERO gradiente (sin imagen), usa la paleta del sitio */
    .souvenirs-hero::before{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(1200px 400px at 50% -20%, rgba(255, 255, 255, 0.09) 0%, transparent 60%),
        linear-gradient(180deg,
          rgba(47,36,28, 1) 0%,
          rgba(93,64,55, .92) 40%,
          rgba(93,64,55, .85) 65%,
          rgba(47,36,28, .85) 100%
        );
    }

    /* Chips de navegaci√≥n */
    .chip{
      display:inline-flex;
      align-items:center;
      gap:.5rem;
      padding:.4rem .75rem;
      background:#fff;
      color:var(--text);
      border:1px solid rgba(0,0,0,.08);
      border-radius:999px;
      font-weight:600;
      box-shadow:0 6px 18px rgba(0,0,0,.08);
      color: rgb(8, 8, 10);
    }
    .chip:hover{ opacity:.95 }

    /* Card de producto */
    .souvenir-card{
      background:#fff;
      border:1px solid var(--line);
      border-radius:16px;
      overflow:hidden;
      box-shadow:var(--shadow-md, 0 8px 24px rgba(0,0,0,.08));
      display:flex;
      flex-direction:column;
    }
    .souvenir-card .media{
      position:relative;
      width:100%;
      aspect-ratio: 4 / 3;
      
      overflow:hidden;
      background:linear-gradient(180deg, #f3ede6, #e9dfd6);
    }
    .souvenir-card .media img{
      position:absolute;
      inset:0;
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .emoji-fallback{
      position:absolute;
      inset:0;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:2.5rem;
      user-select:none;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      padding:.2rem .55rem;
      background:#f7e3cf;
      color:#8a4b14;
      border-radius:999px;
      font-size:.78rem;
      font-weight:700;
      border:1px solid rgba(0,0,0,.05);
    }
    .price{
      font-weight:700;
      color:var(--primary);
      white-space:nowrap;
    }
  </style>
</BaseLayout>

